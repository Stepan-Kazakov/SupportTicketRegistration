@startuml
!theme plain
title Общий процесс работы системы заявок

' === Процесс 1: Подача запроса ===
partition "Процесс 1: Подача запроса" {
start
:Начало;
:Аутентификация пользователя (Presentation Layer);
:Заполнить форму запроса (описание, категория, приоритет)\n(Business Logic Layer);
if (Валидация данных?) then (Да)
  :Сохранить в БД новый тикет со статусом 'Новый'\n(Data Layer);
  :Отправить уведомление администратору\n(Business Logic Layer);
  stop
else (Нет)
  :Ошибка: Вернуться к форме;
  stop
endif
}

' === Процесс 2: Обработка запроса ===
partition "Процесс 2: Обработка запроса" {
start
:Начало;
:Аутентификация администратора (Presentation Layer);
:Выбрать запрос из списка (фильтр по статусу 'Новый')\n(Business Logic Layer);
if (Запрос доступен для обработки?) then (Да)
  :Назначить ответственного (себя/коллегу);
  :Обновить статус (в работе/закрыт) и добавить комментарий\n(Business Logic Layer);
  if (Проверить приоритет: Критический?) then (Да)
    :Уведомить срочно\n(Business Logic Layer);
  else (Нет)
    :Уведомить пользователя;
  endif
  :Сохранить изменения в БД\n(Data Layer);
  stop
else (Нет)
  :Конец: Попробовать другой;
  stop
endif
}

' === Процесс 3: Просмотр статуса ===
partition "Процесс 3: Просмотр статуса" {
start
:Начало;
:Аутентификация (Presentation Layer);
:Ввести ID запроса или фильтр\n(Business Logic Layer);
if (Запрос существует и доступен пользователю?) then (Да)
  :Извлечь данные из БД (статус, комментарии)\n(Data Layer);
  :Отобразить статус и историю\n(Presentation Layer);
  if (Пользователь: Администратор?) then (Да)
    :Опции: Изменить статус;
    stop
  else (Нет)
    :Только просмотр;
    stop
  endif
else (Нет)
  :Ошибка: Нет доступа;
  stop
endif
}

@enduml